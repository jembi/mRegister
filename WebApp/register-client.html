<!DOCTYPE html>
<html>

<head>
  <title>Client Registration</title>
  <link href="https://lhcforms-static.nlm.nih.gov/lforms-versions/36.3.2/webcomponent/styles.css" rel="stylesheet" />
  <link href="app.css" rel="stylesheet" />
</head>

<body>
  <div id="myFormContainer"></div>

  <script src="https://lhcforms-static.nlm.nih.gov/lforms-versions/36.3.2/webcomponent/assets/lib/zone.min.js"></script>
  <script src="https://lhcforms-static.nlm.nih.gov/lforms-versions/36.3.2/webcomponent/lhc-forms.js"></script>
  <script src="https://lhcforms-static.nlm.nih.gov/lforms-versions/36.3.2/fhir/R5/lformsFHIR.min.js"></script>

  <script type="module">
    import { FHIRFormHandler } from './modules/fhirFormWeb.js';

    try {
      const formHandler = new FHIRFormHandler(
        'myFormContainer',
        './questionnaires/questionnaire-client-reg-schema.json',
        [],
        'http://192.168.100.24:5001/QR-to-Patient'
      );

      formHandler.init().catch(err => {
        console.error("Error during form initialization:", err);
        alert("Failed to load form. Please try again later.");
      });
    } catch (err) {
      console.error("Error creating FHIRFormHandler:", err);
      alert("Failed to set up form handler. Please check the configuration.");
    }

  </script>
</body>

</html>